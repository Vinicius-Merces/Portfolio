{% extends 'base.html' %}
{% block content %}
    <h1>Bem-vindo, {{ current_user.username }}!</h1>
    <a href="{{ url_for('logout') }}">Sair</a>
    <h2>Sua lista de clientes</h2>
    <form id="upload-form" enctype="multipart/form-data">
        <input type="file" name="file" accept=".csv">
        <button type="submit">Importar Planilha</button>
    </form>
    <div>
        <input type="text" id="new-column" placeholder="Nome da nova coluna">
        <button id="add-column">Adicionar Coluna</button>
    </div>
    <button id="add-row">Adicionar Linha</button>
    <table id="clients-table">
        <thead>
            <tr>
                <th>ID</th>
                {% for col in columns %}
                    <th>{{ col }} <button class="remove-column" data-col="{{ col }}">X</button></th>
                {% endfor %}
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for client in clients %}
            <tr data-id="{{ client['id'] }}">
                <td>{{ client['id'] }}</td>
                {% for col in columns %}
                    <td contenteditable="true">{{ client['data'].get(col, '') }}</td>
                {% endfor %}
                <td><button class="delete">Excluir</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}